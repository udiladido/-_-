{"ast":null,"code":"import { API_BASE_URL } from \"../app-config\";\nconst ACCESS_TOKEN = \"ACCESS-TOKEN\";\nexport function call(api, method, request) {\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n  const accessToken = localStorage.getItem(ACCESS_TOKEN);\n  if (accessToken) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  let options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method\n  };\n  if (request) {\n    options.body = JSON.stringify(request);\n  }\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n    return json;\n  })).catch(error => {\n    console.log(error.status);\n    if (error.status === 403) {\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  });\n}\nexport function signin(userDTO) {\n  return call(\"/auth/signin\", \"POST\", userDTO).then(response => {\n    if (response.token) {\n      localStorage.setItem(ACCESS_TOKEN, response.token);\n      window.location.href = \"/\";\n    } else {\n      throw new Error(\"로그인 실패: 토큰을 받지 못했습니다.\");\n    }\n  }).catch(error => {\n    console.error(\"로그인 실패\", error);\n  });\n}\nexport function signup(userDTO) {\n  return call(\"/auth/signup\", \"POST\", userDTO).then(response => {\n    if (response.id) {\n      window.location.href = \"/\";\n    }\n  }).catch(error => {\n    console.log(\"Oops!\");\n    console.log(error.status);\n    if (error.status === 403) {\n      window.location.href = \"/auth/signup\";\n    }\n    return Promise.reject(error);\n  });\n}\nexport function signout() {\n  localStorage.removeItem(ACCESS_TOKEN);\n  window.location.href = \"/login\";\n}\nexport function isAuthenticated() {\n  return !!localStorage.getItem(ACCESS_TOKEN);\n}","map":{"version":3,"names":["API_BASE_URL","ACCESS_TOKEN","call","api","method","request","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","fetch","then","response","json","ok","Promise","reject","catch","error","console","log","status","window","location","href","signin","userDTO","token","setItem","Error","signup","id","signout","removeItem","isAuthenticated"],"sources":["C:/Users/ajin/Desktop/새 폴더/초기본 완성/아카이브/src/service/ApiService.js"],"sourcesContent":["import { API_BASE_URL } from \"../app-config\";\r\nconst ACCESS_TOKEN = \"ACCESS-TOKEN\";\r\n\r\nexport function call(api, method, request) {\r\n    let headers = new Headers({\r\n        \"Content-Type\": \"application/json\",\r\n    });\r\n\r\n    const accessToken = localStorage.getItem(ACCESS_TOKEN);\r\n    if (accessToken) {\r\n        headers.append(\"Authorization\", \"Bearer \" + accessToken);\r\n    }\r\n\r\n    let options = {\r\n        headers: headers,\r\n        url: API_BASE_URL + api,\r\n        method: method,\r\n    };\r\n\r\n    if (request) {\r\n        options.body = JSON.stringify(request);\r\n    }\r\n\r\n    return fetch(options.url, options).then((response) =>\r\n        response.json().then((json) => {\r\n            if (!response.ok) {\r\n                return Promise.reject(json);\r\n            }\r\n            return json;\r\n        })\r\n    ).catch((error) => {\r\n        console.log(error.status);\r\n        if (error.status === 403) {\r\n            window.location.href = \"/login\";\r\n        }\r\n        return Promise.reject(error);\r\n    });\r\n}\r\n\r\nexport function signin(userDTO) {\r\n    return call(\"/auth/signin\", \"POST\", userDTO).then((response) => {\r\n        if (response.token) {\r\n            localStorage.setItem(ACCESS_TOKEN, response.token);\r\n            window.location.href = \"/\";\r\n        } else {\r\n            throw new Error(\"로그인 실패: 토큰을 받지 못했습니다.\");\r\n        }\r\n    }).catch((error) => {\r\n        console.error(\"로그인 실패\", error);\r\n    });\r\n}\r\n\r\nexport function signup(userDTO) {\r\n    return call(\"/auth/signup\", \"POST\", userDTO).then((response) => {\r\n        if (response.id) {\r\n            window.location.href = \"/\";\r\n        }\r\n    }).catch((error) => {\r\n        console.log(\"Oops!\");\r\n        console.log(error.status);\r\n        if (error.status === 403) {\r\n            window.location.href = \"/auth/signup\";\r\n        }\r\n        return Promise.reject(error);\r\n    });\r\n}\r\n\r\nexport function signout() {\r\n    localStorage.removeItem(ACCESS_TOKEN);\r\n    window.location.href = \"/login\";\r\n}\r\n\r\nexport function isAuthenticated() {\r\n    return !!localStorage.getItem(ACCESS_TOKEN);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}